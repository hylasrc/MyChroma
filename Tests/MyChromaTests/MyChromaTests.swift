import Foundation
@testable import MyChroma
import Testing

@Test
func testMyChromaAPI() async {
  var chroma = MyChroma("http://localhost:8000")
  let collId = "606c92ad-49bf-4616-ae48-f08d27041965"
  do {
    let neighbors = try? await chroma.getNearestNeighbors(.init(collectionId: collId, queryEmbeddings: [emb]))
    debugPrint(neighbors)
    debugPrint("end")
  } catch {
    debugPrint(error.localizedDescription)
    if let error = error as? URLError {
      debugPrint(error.userInfo)
    }
  }
}

let emb = [
  -0.088226356, -0.19837062, -0.1710476, -0.18355913, -0.22554958, 0.57492626, 0.11340681, 0.3891296, -0.17757814,
  -0.01869832, 0.4540714, -0.5366428, 0.070676595, 0.17484155, -0.12220423, -0.08029482, 0.039772093, 0.09899491,
  -0.50794375, -0.18490288, -0.63943744, 0.18027517, -0.015244167, -0.051795512, -0.20284131, 0.16651703,
  0.43393946, -0.15578651, -0.047495905, 0.6268414, 0.34836975, 0.039553396, 0.091020465, -0.15396763, -0.21911302,
  0.0812754, 0.21092239, 0.049780965, 0.18018202, 0.13143067, -0.124323055, 0.11635901, 0.36107975, -0.53816736,
  0.13550168, -0.24931195, 0.14956087, 0.011645049, -0.44547927, -0.10061854, -0.076217726, 4.6911545,
  -0.0030021071, -0.051331818, -0.13157561, 0.060429223, 0.05207599, 0.1918276, 0.34960076, 0.024660688, 0.06092907,
  -0.08227041, -0.2849354, 0.1711746, 0.15549012, 0.015245639, -0.14899805, -0.5652212, 0.45904866, -0.32298312,
  0.027068809, -0.32513255, 0.06837773, -0.14066736, 0.34521982, -0.12118971, -0.027081683, 0.6350062, -0.19030178,
  -0.49979123, 0.86466026, 0.17511998, -0.00082181673, 0.19733128, -0.66990095, -0.7571236, 0.24011795, 0.32661918,
  0.6069205, -0.012589868, -0.6277582, 0.036293417, -0.13850933, -0.07878855, 0.14142406, 0.02064091, 0.093942136,
  -0.89700276, -0.34444308, -0.09602985, -0.07843071, -0.06507921, -0.33335847, -0.73769957, -0.09628305,
  0.22253214, -0.83776665, 0.4322599, 0.15808171, -0.036352456, -0.20447974, -0.095487915, 0.1867565, 0.08494364,
  -0.056672096, 0.14760073, 0.20498772, -0.13574909, 0.23351124, 0.0151525885, 0.35975873, -0.01041387, 0.32042772,
  -0.24339478, -0.8729859, -0.049000308, 0.21976852, -0.11122939, -0.15836611, -0.30311185, -0.0675947, -0.18010691,
  0.17544949, -0.27179617, -0.15343224, 0.7678286, -0.67057365, -0.07183845, 0.23622619, 0.3269515, 0.50185233,
  0.062392496, -0.33416128, -0.1534877, 0.31751114, 0.0110512525, 0.06057909, -0.058120035, -0.39122286,
  0.055816814, -0.43098375, -0.34586766, -0.27038437, 0.21845038, -0.015334219, -0.271545, -0.56255263, 0.20776641,
  0.24349, -0.33107126, 0.20996805, 0.050737604, 0.06797972, -0.060545087, -0.041456312, 0.3559062, 0.027405135,
  0.03237681, 0.0543615, -0.3108845, 0.16678812, 0.20684898, -0.009707622, 0.13713346, -0.05421897, -0.0060652494,
  -0.036487207, -0.04742298, -0.3836, 0.1300959, 0.25434506, -0.12923093, -0.32322967, 0.048356168, -0.18019374,
  0.93528587, -0.20438144, 0.10062376, 0.08760479, 0.67790693, 0.0573411, -0.11067481, -0.43408638, -0.02979809,
  0.19052777, -0.10181404, 0.23827672, -0.12187299, 0.13619278, -0.02410692, -0.21098232, 0.012198761, 0.06802882,
  0.31027853, 0.09041439, 0.15775006, 0.6642407, 0.45700043, -0.09701941, 0.051697284, 0.10241849, -0.48025703,
  -0.050454028, -0.27190855, -0.5302047, -0.096584454, -1.067993, 0.31627297, -0.37978065, 0.09352188, 0.20818621,
  -0.5278231, -0.34382442, -0.02792912, 0.070829995, 0.25135806, -0.5085047, -0.25680792, 0.024548799, 0.12241742,
  0.13564922, 0.38872114, 0.16250336, 0.27995926, 0.07682895, 0.5901788, -0.32435673, 0.17704965, 0.30466697,
  -0.06038119, 0.18263417, 0.14368598, 0.6976419, -0.27073428, -0.104456246, -0.06886184, -0.027032834, 0.5577334,
  -0.5764525, -0.10432525, -0.28271458, 0.1579226, -0.10441466, -0.00089122355, -0.17110105, 0.11812334,
  -0.26193136, 0.13275236, -0.008016162, -0.13643983, 0.3735082, 0.20082754, -0.14057991, -0.161012, 0.38934857,
  -0.35672444, 0.011115389, -0.19995251, -0.75757444, 0.1389386, 0.34061018, 0.2389355, -0.15888608, 0.17132592,
  -0.42247406, 0.4242645, -0.1720282, 0.0881599, 0.29126963, -0.37872398, 0.5361483, 0.33313772, 0.09340328,
  0.07523638, -0.6853648, -0.16953051, -0.034423117, -0.3881567, -0.11600195, 0.14810039, -0.07783617, -0.18890506,
  -0.2709952, 0.08689201, 2.9708867, 0.04180041, 0.30181506, 0.094378926, 0.42120743, -0.5404241, -0.009536419,
  -0.22621098, 0.49243444, 0.09249127, 0.21904251, 0.6158326, 0.05361156, -0.014440142, -0.080832414, -0.14784977,
  0.19456993, -0.19009405, 0.099239856, -0.17448929, 0.034290463, 0.023776397, -0.27661264, -0.91000766, 0.55110294,
  -0.17107238, 0.27084947, 0.16966042, -0.015926667, 0.102277964, 0.47666478, -0.14670797, 0.56678724, -0.1654005,
  -0.69508386, 0.037069157, 0.35427612, -0.42605603, -0.16674632, -0.08707352, 0.041842476, -0.2897903, -0.5330307,
  0.08470966, -0.20978892, -0.006932199, 0.62355375, -0.15684974, -0.09954989, 0.5807791, -0.82097125, -0.14779651,
  -0.068651766, 0.13851152, -0.17612407, -0.23055458, 0.25761744, -0.7953443, -0.40275425, 0.1506902, 0.094115436,
  0.072753385, -0.38242888, -0.52313566, 0.14590773, 0.17677064, 0.18066886, 0.047936343, -0.23086467, 0.112347566,
  -0.14468548, -0.17279366, 0.122421175, 0.02441083, 0.030197978, 0.14997202, 0.058088854, 0.15549839, -0.0596641,
  -0.019444793, 0.15236445, 0.08878979, 0.0121365115, 0.18092516, -0.017127566, -0.39511788, 0.18654096,
  0.0016991794, -0.8400607, -0.48745936, -0.39262545, -0.15230435, -0.24896786, -0.54425365, -1.0877001,
  -0.44893697, -0.43413898, 0.03655398, -0.21261527, -0.029069893, 0.16391549, 0.11973423, -0.01194872, 0.3589787,
  -0.089189015, -0.27342117, 0.25680643, 0.3190802, 0.13059202, -0.21436577, -0.3499481, 0.40673226, 0.00319352,
  -0.062044635, 0.41020626, -0.026281834, -0.90883803, 0.50812376, -0.31784353, -0.17531143, 0.34644288,
  0.011135291, 0.6241342, 0.11755842, 0.46900275, 0.35897124, 0.41049188, -0.2716974, 0.58719355, -0.051215593,
  0.20492586, 0.22075865, 0.035864636, 0.26270357, 0.12794654, 0.59744745, 0.34655184, -0.18786955, 0.42968482,
  -0.5837329, -0.09093742, 0.12296085, 0.005567357, -0.007862352, 0.46717793, -0.008412555, -0.21386284,
  -0.27317488, -0.78485334, -0.4704234, 0.15511632, 0.04967761, -0.23065877, 0.21966323, -0.461111, 0.26947266,
  0.071133345, 0.62098235, -0.024869332, -0.26491845, -0.110457465, -0.3880635, 0.22358459, -0.29411694, 0.04920335,
  0.29410738, -0.7567748, -0.057934344, -0.086134695, -0.19750044, 0.26045927, -0.5671242, 0.6105107, 0.35615978,
  -0.21276964, 0.22712632, 0.075813904, -0.29167658, 0.32659984, 0.10623622, 0.05324785, 0.17566617, -0.7788289,
  0.07922855, -0.8946114, -0.5918189, 0.79487294, 0.21329, -0.029561505, -0.08450479, -0.44197217, -0.07277365,
  -0.3148045, -0.13769549, -0.1907067, -0.091868006, -0.1029792, 0.056180775, 0.3993488, 0.043790936, -0.56394315,
  0.6118785, -0.21960005, 0.13409293, -0.0057105273, -0.010287203, 0.06621774, -0.17388804, -0.29389283,
  0.122387156, -0.58493376, 0.42867866, -0.48128146, -0.09048254, -0.12525392, 0.0507441, -0.1570329, 0.33034807,
  0.28138688, 0.034826845, -0.010574117, 0.024128117, -0.07429484, -0.47688764, -0.0030778646, -0.119238585,
  0.36010998, 0.19781956, 0.35452405, 0.013209283, -0.15983385, -0.32588857, 0.10693171, -0.52145135, -0.01051325,
  0.58636504, -0.7310809, -0.035698567, -0.02026353, -0.23686582, -0.5990793, 0.44188017, -0.2212045, -0.108581945,
  -0.13121717, -1.2485305, -0.09901245, -0.029655442, -0.16672437, -0.083571754, -0.10361646, -0.276358, 0.6064081,
  -0.27275229, 0.079132676, -0.004407041, -0.53381234, 0.4167468, 0.4210438, 0.32087007, 0.41726452, 0.1364378,
  -0.9199348, -0.58368635, -0.27721438, 0.09583872, -0.3159014, -0.017097458, 0.20412427, -0.024755986, -0.07539893,
  -0.17681472, 0.22444634, 0.0939666, -0.21557686, -0.32600918, -0.69720966, -0.18662897, -0.2904152, -0.67606777,
  -0.13963626, -0.24041125, 0.0137782395, -0.029969536, -0.1950813, 0.14339292, 0.22594443, 0.21131855, 0.01233393,
  -0.19761369, 0.035407066, -0.2034046, 0.6243475, -0.61742663, 0.124201745, -0.46818417, 0.22174469, 0.18288168,
  -0.05091393, 0.20935759, -0.024919823, 0.18652189, -0.10439849, -0.033830024, 0.27293885, 0.28880745, 0.28137738,
  0.011378139, 0.32312822, 0.72405005, -0.24217594, 0.56405073, 0.17977434, -0.062017653, -0.07560641, 0.177471,
  -0.57389116, 0.17936234, 0.0039141476, -0.21206097, -0.16128671, 0.6100174, -0.43938768, -0.124916725, 0.37022007,
  0.32738766, -0.17957175, 0.18580723, 0.4652892, -0.28601024, 0.006875634, -0.24890408, -0.28010267, 0.40162244,
  0.00549525, 0.164142, 0.025784895, -0.099664465, -0.101873785, 0.28067207, 0.074636415, 0.027316049, -0.39653996,
  0.21877563, -0.024225667, -0.36446404, 0.22372869, -0.45215645, 0.12894464, 0.54127955, -0.11537073, -0.6409506,
  0.071635395, 0.05300925, 0.10848762, -0.030704219, -0.048114836, -0.20069574, 0.14462593, 0.14472891, 0.79374826,
  -0.6019176, 0.67976594, 0.14924473, 0.07214302, -0.18222833, -0.018228631, 0.07014447, 0.7418378, 0.24974859,
  -0.095665775, -0.18508428, 0.1880675, -0.16508299, -0.17265779, -0.54770434, 0.14299153, -0.19327606, -0.39164108,
  0.4122669, -0.3500594, -0.14931536, 0.052697167, -0.2004613, -0.42862558, -0.352245, -0.55852866, -0.034648865,
  -0.07239023, -0.027545612, -0.2729357, -0.016353771, 0.002864331, 0.068682134, 0.0040479824, 1.4693081,
  -0.87628514, 0.049954697, 0.68194944, 0.064003006, 0.47044274, 1.3545878, -0.51856875, -0.038146093, 0.13869932,
  -0.014794178, 0.37968868, 0.55789566, -0.16725203, -0.18029964, -0.0016986579, -0.12370932, -0.3450998,
  -0.63578236, -0.5193105, -0.3953997, 0.2356925, -0.42884248, -0.03421931, -0.6918265, -0.046235368, 0.13283917,
  -0.24125841, 0.005928427, -0.035885945, -0.28799886, 0.34303775, 0.641231, 0.014025211, -0.04873866, 0.15728125,
  0.3928213, 0.3243719, 0.3443057, 0.31650463, -0.6609611, -0.08867925, -0.40786242, -0.30625713, 0.31068957,
  -0.61951303, 1.0834562, -0.15983063, 0.057918176, 0.46002218, 0.14181906, 0.016725384, -0.06610422, 0.63971776,
  -0.11975953, -0.36290324, -0.3688572, 0.042158008, -0.0028176904, -0.12007983, 0.08270571, -0.17804502,
  -0.43319026, 0.14889202, 0.1039484, -0.28502074, -0.23741181, -0.96308887, 0.045080207, -0.17603365, -0.3414659,
  -0.4845492, -0.07816655, -0.04766272, -0.7055578, -0.60772836, 0.1438631, -0.08648733, -0.1896582
]
